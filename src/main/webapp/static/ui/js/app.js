(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t,n){e.exports=n("56d7")},"0b07":function(e,t,n){"use strict";n("e12f")},4360:function(e,t,n){"use strict";var r,o,a=n("2b0e"),c=n("2f62"),u={sidebar:function(e){return e.app.sidebar},device:function(e){return e.app.device},le1600:function(e){return e.app.le1600},layoutLoaded:function(e){return e.app.layoutLoaded},token:function(e){return e.user.token},account:function(e){return e.user.account},courseList:function(e){return e.course.list}},i=u,s=n("bd86"),d=n("9fb0"),f={sidebar:{opened:!0,withoutAnimation:!1},layoutLoaded:!1,device:"desktop",le1600:!0},l=(r={},Object(s["a"])(r,d["a"].SET_LAYOUT_LOADED,(function(e){e.layoutLoaded=!0})),Object(s["a"])(r,d["a"].TOGGLE_DEVICE,(function(e,t){e.device=t})),Object(s["a"])(r,d["a"].LE1600,(function(e,t){e.le1600=t})),r),p={toggleDevice:function(e,t){var n=e.commit;n(d["a"].TOGGLE_DEVICE,t)},le1600:function(e,t){var n=e.commit;n(d["a"].LE1600,t)}},m={namespaced:!0,state:f,mutations:l,actions:p},h=n("75fc"),b=n("db72"),E=(n("ac6a"),n("6762"),n("2fdb"),n("a18c"));function v(e,t,n){return!(e.meta&&e.meta.rights&&e.meta.rights.length>0)||t.some((function(t){return!!e.meta.rights.includes(t)&&(n.push(t),!0)}))}function T(e,t,n){var r=[];return e.forEach((function(e){var o=Object(b["a"])({},e);v(o,t,n)&&(o.children?(o.children=T(o.children,t,n),o.children&&o.children.length>0&&r.push(o)):r.push(o))})),r}var g={routes:[],addRoutes:[],routeRights:[]},O=(o={},Object(s["a"])(o,d["c"].SET_ROUTES,(function(e,t){e.addRoutes=t,e.routes=E["b"].concat(t)})),Object(s["a"])(o,d["c"].SET_RIGHTS,(function(e,t){e.routeRights=t})),o);function _(e,t){null==e.redirect&&e.children&&(e.redirect=[].concat(Object(h["a"])(t),[e.children[0].path]).join("/"),e.children.forEach((function(e){_(e,[].concat(Object(h["a"])(t),[e.path]))})))}var S={generateRoutes:function(e,t){var n=e.commit;return new Promise((function(e){var r=[],o=T(E["asyncRoutes"],t,r);o.forEach((function(e){return _(e,[e.path])})),n(d["c"].SET_ROUTES,o),n(d["c"].SET_RIGHTS,r),e(o)}))}},w={namespaced:!0,state:g,mutations:O,actions:S},j=n("b775");function L(){return Object(j["a"])({url:"/inspect/me/info",method:"get"})}var R,k=n("a78e"),y=n.n(k),A="vue_admin_template_token";function C(){return y.a.remove(A)}var U={token:"",account:"",name:"",pageRights:[]},G=(R={},Object(s["a"])(R,d["d"].SET_TOKEN,(function(e,t){e.token=t})),Object(s["a"])(R,d["d"].SET_ACCOUNT,(function(e,t){e.account=t})),Object(s["a"])(R,d["d"].SET_NAME,(function(e,t){e.name=t})),Object(s["a"])(R,d["d"].SET_PAGE_RIGHTS,(function(e,t){e.pageRights=t})),R),I={getInfo:function(e){var t=e.commit;e.state;return new Promise((function(e,n){L().then((function(n){t(d["d"].SET_TOKEN,"123455"),t(d["d"].SET_ACCOUNT,"jhge"),t(d["d"].SET_NAME,"测试"),e(n)})).catch((function(e){n(e)}))}))},logout:function(e){var t=e.commit;e.state;return new Promise((function(e,n){t(d["d"].SET_TOKEN,""),t(d["d"].SET_PAGE_RIGHTS,[]),t(d["d"].SET_HANDLE_RIGHTS,[]),C(),Object(E["d"])(),e()}))}},x={namespaced:!0,state:U,mutations:G,actions:I},N=function(){return Object(j["a"])({method:"get",url:"/party/my/course/list"})},P={list:[]},D=Object(s["a"])({},d["b"].SET_COURSE_LIST,(function(e,t){e.list=t||[]})),M={getCourses:function(e){var t=e.commit;e.state;return new Promise((function(e,n){N().then((function(n){var r=n.errno,o=n.entities;0===r&&o&&t(d["b"].SET_COURSE_LIST,o),e(n)})).catch((function(e){n(e)}))}))}},H={namespaced:!0,state:P,mutations:D,actions:M};a["default"].use(c["a"]);var K=new c["a"].Store({modules:{app:m,permission:w,user:x,course:H},getters:i});t["a"]=K},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),o=(n("f5df"),n("5c96")),a=n.n(o),c=(n("0fae"),n("f0d9")),u=n.n(c),i=(n("b20f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)}),s=[],d={name:"App"},f=d,l=n("2877"),p=Object(l["a"])(f,i,s,!1,null,null,null),m=p.exports,h=n("4360"),b=n("a18c"),E=n("db72"),v=(n("96cf"),n("3b8d")),T=n("323e"),g=n.n(T);n("a5d8");if(g.a.configure({showSpinner:!1}),b["c"].beforeEach(function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(g.a.start(),!(h["a"].getters.courseList&&h["a"].getters.courseList.length>0||!t.meta||t.meta&&!t.meta.courseList)){e.next=5;break}r(),e.next=14;break;case 5:return e.prev=5,e.next=8,h["a"].dispatch("course/getCourses");case 8:r(Object(E["a"])(Object(E["a"])({},t),{},{replace:!0})),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](5),g.a.done();case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t,n,r){return e.apply(this,arguments)}}()),b["c"].afterEach((function(){g.a.done()})),r["default"].use(a.a,{locale:u.a}),r["default"].config.productionTip=!1,!window.location.origin){var O=window.location,_=O.protocol,S=O.hostname,w=O.port;window.location.origin="".concat(_,"//").concat(S).concat(w?":".concat(w):"")}new r["default"]({el:"#app",router:b["c"],store:h["a"],render:function(e){return e(m)}})},5950:function(e,t,n){},"9fb0":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return c}));var r={TOGGLE_DEVICE:"toggleDevice",LE1600:"le1600",SET_LAYOUT_LOADED:"setLayoutLoaded"},o={SET_ROUTES:"setRoutes",SET_RIGHTS:"setRouteRights"},a={SET_TOKEN:"setToken",SET_ACCOUNT:"setAccount",SET_NAME:"setName",SET_PAGE_RIGHTS:"setPageRights"},c={SET_COURSE_LIST:"setCourseList"}},a18c:function(e,t,n){"use strict";var r=n("2b0e"),o=n("8c4f"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-wrapper"},[n("app-main")],1)},c=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[n("router-view",{key:e.key})],1)},i=[],s={name:"AppMain",computed:{key:function(){return this.$route.path}}},d=s,f=(n("d7c2"),n("2877")),l=Object(f["a"])(d,u,i,!1,null,"33025982",null),p=l.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("iframe",{attrs:{id:"alive",src:e.src}})},h=[],b={name:"Alive",data:function(){return{src:"/alive"}}},E=b,v=(n("0b07"),Object(f["a"])(E,m,h,!1,null,"41d9f0c3",null)),T=(v.exports,{name:"Layout",components:{AppMain:p}}),g=T,O=Object(f["a"])(g,a,c,!1,null,null,null),_=O.exports,S="/ui",w={path:"".concat(S),component:_,redirect:"".concat(S,"/home"),meta:{breadcrumb:!1},children:[{name:"home",path:"home",component:function(){return n.e("user").then(n.bind(null,"7abe"))},meta:{title:"红色商博微党课"}},{name:"course",path:"course",component:function(){return n.e("user").then(n.bind(null,"bff8"))},meta:{title:"红色商博微党课",courseList:!0}},{name:"course_detail",path:"course/:id",component:function(){return n.e("user").then(n.bind(null,"c509"))},meta:{title:"红色商博微党课",courseList:!0}}]},j=w;n.d(t,"b",(function(){return R})),n.d(t,"d",(function(){return A})),r["default"].use(o["a"]);var L="/ui",R=[{path:"",component:_,hidden:!0,redirect:"".concat(L,"/home")},j,{path:"".concat(L,"/404"),component:function(){return n.e("404").then(n.bind(null,"8cdb"))},hidden:!0}],k=function(){return new o["a"]({mode:"history",scrollBehavior:function(){return{y:0}},routes:R})},y=k();function A(){var e=k();y.matcher=e.matcher,y.baseRoute=L}y.baseRoute=L;t["c"]=y},b20f:function(e,t,n){e.exports={primaryColor:"#9E0100"}},b775:function(e,t,n){"use strict";var r=n("db72"),o=n("bc3a"),a=n.n(o),c=n("5c96"),u=n("4360"),i=n("2ef0"),s=n("9fb0"),d=a.a.create({baseURL:"/",timeout:2e4});d.interceptors.request.use((function(e){return e.headers["X-Requested-With"]="XMLHttpRequest",u["a"].getters.token&&(e.headers["x-csrf-token"]=u["a"].getters.token),e}),(function(e){return Promise.reject(e)})),d.interceptors.response.use((function(e){if(204===e.status)return e.data;var t=e.data;if(t.errno&&t.errno>0){var n=t.error||"Error";return Object(c["Message"])({message:n,type:"error",duration:5e3}),Promise.reject(new Error(n))}return t}),(function(e){if(e.response&&e.response.data&&(403===e.response.status||401===e.response.status)){if(10004===e.response.data.errno)return new Promise((function(e){Object(c["MessageBox"])({title:"本次登录已经超时",message:"请重新登录，并在登录窗口关闭后继续先前的操作。",confirmButtonText:"重新登录",showClose:!1}).then((function(){var t=window.location.origin+"/relogin";window.open(t+"?"+(new Date).getTime());var n=function t(){window.removeEventListener("focus",t),u["a"].getters.layoutLoaded?e():window.location.reload()};window.addEventListener("focus",n)}))})).then((function(){var t=e.config,n=Object(r["a"])({},t);return Object(i["startsWith"])(t.url,t.baseURL)&&(n.url=t.url.substr(t.baseURL.length)),d(n)}));if(10005===e.response.data.errno){var t=e.config,n=Object(r["a"])({},t);return Object(i["startsWith"])(t.url,t.baseURL)&&(n.url=t.url.substr(t.baseURL.length)),u["a"].commit("user/".concat(s["d"].SET_TOKEN),e.response.data.entities[0]),d(n)}if(10006===e.response.data.errno)return Object(c["Message"])({message:"您无权访问，请联系管理员",type:"error",duration:5e3}),Promise.reject(e)}var o=e.response&&e.response.data&&e.response.data.error?e.response.data.error:e.message;return"取消请求"!==o&&Object(c["Message"])({message:o,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=d},d7c2:function(e,t,n){"use strict";n("5950")},e12f:function(e,t,n){}},[[0,"runtime","chunk-elementUI","chunk-libs"]]]);